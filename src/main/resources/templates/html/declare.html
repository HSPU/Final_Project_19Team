<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>회원정보</title>
    <link rel="stylesheet" th:href="@{../css/declare.css}" href="../static/css/declare.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Material+Icons%3A400">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+Sans+KR%3A700">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto%3A400%2C500%2C700">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro%3A400%2C500%2C700">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans%3A400">
</head>

<body>
    <!-- Declare List / 신고리스트 -->
    <div class="item--DHT">
        <div class="auto-group-rt5f-Hgd">
            <div class="group-254-C2u">
                <div class="declare-list-WJV">Declare List</div>
                <div class="group-213-jww">
                    <button class="group-249-6nV">글쓰기</button>
                </div>
            </div>

            <!-- 번호/제목/신고일/ -->
            <div class="auto-group-ebq3-m7w">
                <div class="line-86-G4h">
                </div>
                <div class="group-250-Cyw">
                    <p class="item--LqF">번호</p>
                    <p class="item--Rbo">제목</p>
                    <p class="item--9Gu">신고일</p>
                    <p class="item--THb">수정/삭제</p>
                    <p class="item--QCq">답변여부</p>
                </div>
                <div class="line-79-Kah">
                </div>

            </div>
        </div>
    </div>
    <!-- Declare / 팝업-->
    <div class="item--tPs" id="declarePopup">
        <div class="auto-group-oydx-bhb">
            <div class="auto-group-wdus-V2H">
                <div class="declare-AeD">Declare</div>
                <button class="close-button"><img class="close-Srd" src="../assets/declare/close.svg"
                                                  alt="X" /></button>
            </div>
            <div class="singupbutton-Y8y">Title : <input class="font12" type="text" id="declareTitle" /></div>
            <div class="type-m1j">Type</div>
            <div class="auto-group-tkjb-t6M">
                <button class="content-7E1">욕설/비방</button>
                <button class="content-7E1">도배</button>
                <button class="content-7E1">음란</button>
                <button class="content-7E1">기타</button>
            </div>
            <textarea wrap="hard" type="text" id="declareContent" placeholder="Detail :신고합니다!"
                      class="auto-group-jykm-4iu"></textarea>
            <div class="fgrou-KPw">
                <button class="group-249-KPw" id="submitDeclare">등록</button>
                <button class="group-555-KPw">수정완료</button>
            </div>
        </div>
    </div>
                <script>
                    const declarePopup = document.getElementById('declarePopup');
                    const declareTitleInput = document.getElementById('declareTitle');
                    const declareContentInput = document.getElementById('declareContent');
                    const submitDeclareButton = document.getElementById('submitDeclare');

                    // 글 번호
                    let itemNumber = 1;

                    // 삭제 버튼에 대한 이벤트 리스너 등록 함수
                    function registerDeleteButtonListener(button) {
                        button.addEventListener('click', (event) => {
                            const itemElement = event.target.closest('.group-251-3mb');
                            const itemId = itemElement.id;
                            const itemToDelete = document.getElementById(itemId);
                            if (itemToDelete) {
                                itemToDelete.remove();
                            }
                        });
                    }


                    // "신고" 버튼 클릭 시 리스트 추가
                    submitDeclareButton.addEventListener('click', () => {
                        const title = declareTitleInput.value; // 제목 입력 값
                        const currentDate = new Date().toLocaleDateString(); // 현재 날짜

                        // 새로운 항목 추가
                        const newItem = `
                                        <div id="number${itemNumber}" class="group-251-3mb"> <!-- ID 지정 -->
                                            <div class="auto-group-6pd7-LVo">
                                                <p class="item-230817-gJm">${itemNumber}</p>
                                                <p class="oo--DpV">${title}</p>
                                                <p class="item-2023-08-02-kpR">${currentDate}</p>
                                            </div>
                                            <div class="flex">
                                                <button class="group-262-euo edit-button">수정</button>
                                                <button class="group-264-euo delete-button">삭제</button>
                                            </div>
                                            <p class="item--VvR">미완</p>
                                            <div class="line-80-dmj"></div>
                                        </div>

                                        `;

                        // 항목 추가
                        const declareList = document.querySelector('.auto-group-ebq3-m7w');
                        declareList.insertAdjacentHTML('beforeend', newItem);

                        // 추가된 삭제 버튼에 대한 이벤트 리스너 등록
                        const newDeleteButton = document.querySelector(`#number${itemNumber} .delete-button`);
                        if (newDeleteButton) {
                            registerDeleteButtonListener(newDeleteButton);
                        }

                        // 입력 필드 초기화 및 팝업 닫기
                        declareTitleInput.value = '';
                        declareContentInput.value = '';
                        declarePopup.style.display = 'none';

                        itemNumber++; // 번호 증가

                        const typeButtonReset = document.querySelectorAll('.content-7E1');
                        typeButtonReset.forEach((button) => {
                            button.style.backgroundColor = '#cccccc';
                            button.style.color = '#1e1e1e';
                        })
                    });


                    // "글쓰기" 버튼 클릭 시 팝업 표시
                    const writeButton = document.querySelector('.group-249-6nV');
                    writeButton.addEventListener('click', () => {
                        declarePopup.style.display = 'block';
                        declareTitleInput.value = ''; // 글 번호와 내용을 초기화
                        declareContentInput.value = '';
                        typeButtons.style.color = '#ffffff';
                    });

                    // 삭제 버튼들에 대한 이벤트 리스너 등록
                    const deleteButtons = document.querySelectorAll('.delete-button');
                    deleteButtons.forEach((button) => {
                        registerDeleteButtonListener(button);
                    });


                    // 팝업 닫기 버튼 클릭 시 팝업 닫기
                    const closeButton = document.querySelector('.close-button');
                    closeButton.addEventListener('click', () => {
                        declarePopup.style.display = 'none';
                    });


                    // 타입 버튼 클릭 시 배경색과 글자색 변경
                    const typeButtons = document.querySelectorAll('.content-7E1');
                    typeButtons.forEach((button) => {
                        button.addEventListener('click', () => {
                            const computedStyle = getComputedStyle(button);
                            const currentBgColor = computedStyle.backgroundColor;
                            if (currentBgColor === 'rgb(63, 81, 181)') {
                                button.style.backgroundColor = '#cccccc';
                                button.style.color = '#1e1e1e';
                            } else {
                                button.style.backgroundColor = '#3f51b5';
                                button.style.color = '#ffffff';
                            }
                        });
                    });
                </script>
</body>
</html>